(()=>{"use strict";function e(e){return parseInt(e-273.15)}const t=document.getElementById("degree");function n(e){const t="celsius"==e?"fahrenheit":"celsius",n=document.querySelectorAll(`.wi-${t}`);let o;if([,...o]=n,0==o.length)return;const c=document.querySelectorAll(".degree");o.map((t=>t.className=`wi wi-${e}`)),c.forEach((t=>t.innerText=function(e,t){return"fahrenheit"===e?parseInt(9*t/5+32):parseInt(5*(t-32)/9)}(e,t.innerText)))}async function o(n){const o=`https://api.openweathermap.org/data/2.5/weather?q=${n}&APPID=780876c77a2ffc68569ba8637b985e4f`;try{const n=await fetch(o,{mode:"cors"});!function(n){!1!==function({cod:e}){return"404"!=e||(alert("Invalid city name"),!1)}(n)&&(function({name:e}){document.getElementById("city").innerText=e}(n),function({timezone:e}){const t=document.getElementById("time"),n=new Date;let o=n.getUTCHours()+e/3600;const c=n.getUTCMinutes();o>24&&(o-=24);let i=o>12?o-12:o;i>12&&(i-=12);const d=o>12?"PM":"AM",m=c<10?"0"+c:c;t.innerText=`${i}:${m} ${d}`,function(e){let t=document.body.style.backgroundImage;t=e>6&&e<18?"url(./img/bg-day.jpg);":"url(./img/bg-night.jpg);",console.log(t)}(o),console.log(o)}(n),function({main:{temp:n}}){t.innerText=e(n)}(n),function({weather:e}){document.getElementById("condition").innerText=e[0].main}(n),function({weather:e}){document.getElementById("conditionImg").className=`wi wi-owm-${e[0].id}`}(n),function({wind:e}){const t=document.getElementById("speed"),n=document.getElementById("gust"),o=document.getElementById("deg"),c=document.getElementById("degIcon");null==e.gust&&(e.gust="None"),t.innerText=e.speed,n.innerText=e.gust,o.innerText=e.deg,c.classList=`wi wi-wind towards-${e.deg}-deg`}(n),function({main:e}){const t=document.getElementById("humidity"),n=document.getElementById("pressure");t.innerText=e.humidity,n.innerText=e.pressure}(n),function({main:t}){const n=document.getElementById("min"),o=document.getElementById("max"),c=document.getElementById("feel");n.innerText=e(t.temp_min),o.innerText=e(t.temp_max),c.innerText=e(t.feels_like)}(n))}(await n.json())}catch(e){console.error(e)}}o("New York"),function(){const e=document.getElementById("search"),t=document.getElementById("celsius"),c=document.getElementById("fahrenheit");e.addEventListener("keypress",(t=>{"Enter"==t.key&&(t.preventDefault(),o(e.value),e.value="")})),t.addEventListener("click",(()=>n("celsius"))),c.addEventListener("click",(()=>n("fahrenheit")))}(),console.log(document.body.style)})();